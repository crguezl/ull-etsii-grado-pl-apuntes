<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Ejercicios: Casos de Estudio</TITLE>
<META NAME="description" CONTENT="Ejercicios: Casos de Estudio">
<META NAME="keywords" CONTENT="javascriptexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node62.html">
<LINK REL="previous" HREF="node60.html">
<LINK REL="up" HREF="node44.html">
<LINK REL="next" HREF="node62.html">
</HEAD>

<BODY >

<DIV CLASS="navigation">
<A NAME="tex2html1967"
  HREF="node62.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html1961"
  HREF="node44.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html1955"
  HREF="node60.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html1963"
  HREF="node88.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1965"
  HREF="node91.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/perlexamples/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="Apuntes de LPP"></A><A NAME="tex2html3"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5669"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2014/2015"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2013/2014"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="https://plus.google.com/u/0/communities/103299470687051533933"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1415"></A><A NAME="tex2html7"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html8"
  HREF="http://www.ull.es/view/centros/etsii/Grado_en_Ingenieria_Informatica/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html9"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html10"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html1968"
  HREF="node62.html">Recuperación de Errores</A>
<B>Sup:</B> <A NAME="tex2html1962"
  HREF="node44.html">Análisis Sintáctico Ascendente en</A>
<B> Ant:</B> <A NAME="tex2html1956"
  HREF="node60.html">Definición Dirigida por la</A>
<B> Con:</B> 
<A NAME="tex2html1963"
  HREF="node88.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>
<B> Ind:</B> 
<A NAME="tex2html1965"
  HREF="node91.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A>
<BR> <P>
</DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html1969"
  HREF="node61.html#SECTION045171000000000000000">Un mal diseño</A>
<UL>
<LI><A NAME="tex2html1970"
  HREF="node61.html#SECTION045171010000000000000">Donde</A>
</UL>
<BR>
<LI><A NAME="tex2html1971"
  HREF="node61.html#SECTION045172000000000000000">Gramática no LR(1)</A>
<UL>
<LI><A NAME="tex2html1972"
  HREF="node61.html#SECTION045172010000000000000">Donde</A>
</UL>
<BR>
<LI><A NAME="tex2html1973"
  HREF="node61.html#SECTION045173000000000000000">Un Lenguaje Intrínsecamente Ambiguo</A>
<UL>
<LI><A NAME="tex2html1974"
  HREF="node61.html#SECTION045173010000000000000">Donde</A>
</UL>
<BR>
<LI><A NAME="tex2html1975"
  HREF="node61.html#SECTION045174000000000000000">Conflicto reduce-reduce</A>
<UL>
<LI><A NAME="tex2html1976"
  HREF="node61.html#SECTION045174010000000000000">Solución</A>
<LI><A NAME="tex2html1977"
  HREF="node61.html#SECTION045174020000000000000">Donde</A>
<LI><A NAME="tex2html1978"
  HREF="node61.html#SECTION045174030000000000000">Véase</A>
</UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION045170000000000000000">
Ejercicios: Casos de Estudio</A>
</H1>
Véase nuestro proyecto
<A NAME="tex2html302"
  HREF="https://code.google.com/p/grammar-repository/">Grammar Repository</A>
en GoogleCode.

<P>

<H2><A NAME="SECTION045171000000000000000">
Un mal diseño</A>
</H2>
<P>
<DIV><B>Ejercicio  <SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">17</SPAN>.<SPAN CLASS="arabic">1</SPAN></B> &nbsp; 
<I>This grammar 
</I>
<P><PRE>
  %token D S

  %%
  p: ds ';' ss  | ss ;
  ds: D ';' ds    
    | D  
  ;
  ss: S ';' ss  | S  ;
  %% 
</PRE>
<P>
<I>illustrates a typical LALR conflict due to a 
bad grammar design. 
</I>
<UL>
<LI>Reescriba la gramática para que no existan conflictos
</LI>
<LI>Escriba las acciones semánticas necesarias para imprimir la lista de <code>D</code>s seguida de la lista de <code>S</code>s
</LI>
</UL></DIV><P></P>

<P>

<H4><A NAME="SECTION045171010000000000000">
Donde</A>
</H4>
  

<UL>
<LI><PRE>
[~/jison/jison-decs-sts(master)]$ pwd -P
/Users/casiano/local/src/javascript/PLgrado/jison/jison-decs-sts
</PRE>
</LI>
<LI><PRE>
[~/jison/jison-decs-sts(master)]$ git remote -v
origin  git@github.com:crguezl/jison-decs-sts.git (fetch)
origin  git@github.com:crguezl/jison-decs-sts.git (push)
</PRE>
</LI>
<LI><A NAME="tex2html303"
  HREF="https://github.com/crguezl/jison-decs-sts">https://github.com/crguezl/jison-decs-sts</A>
</LI>
</UL>

<P>

<H2><A NAME="SECTION045172000000000000000">
Gramática no LR(1)</A>
</H2>

<P>
La siguiente gramática no es LR(1).
<PRE>
[~/srcPLgrado/jison/jison-nolr]$ cat confusingsolvedppcr.y
%%
A: 
    B 'c' 'd' 
  | E 'c' 'f' 
;
B: 
    'x' 'y'
;
E: 
    'x' 'y' 
;

%%
</PRE>
Encuentre una gramática sin conflictos equivalente a la anterior.

<P>

<H4><A NAME="SECTION045172010000000000000">
Donde</A>
</H4>
  

<P>

<UL>
<LI><PRE>
[~/jison/jison-nolr(master)]$ pwd -P
/Users/casiano/local/src/javascript/PLgrado/jison/jison-nolr
</PRE>
</LI>
<LI><PRE>
[~/jison/jison-nolr(master)]$ git remote -v
origin  git@github.com:crguezl/jison-nolr.git (fetch)
origin  git@github.com:crguezl/jison-nolr.git (push)
</PRE>
</LI>
<LI><A NAME="tex2html304"
  HREF="https://github.com/crguezl/jison-nolr">https://github.com/crguezl/jison-nolr</A>
</LI>
</UL>

<P>

<H2><A NAME="SECTION045173000000000000000">
Un Lenguaje Intrínsecamente Ambiguo</A>
</H2>
<P>
<DIV><B>Ejercicio  <SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">17</SPAN>.<SPAN CLASS="arabic">2</SPAN></B> &nbsp; 
<I>A context-free language is inherently ambiguous if all context-free
grammars generating that language are ambiguous.  While some
context-free languages  have both ambiguous and unambiguous grammars, there
are context-free languages for which no unambiguous context-free
grammar can exist. An example of an inherently ambiguous language
is the set 
</I>
<P>
<I><code>{ a^n b^n c^m : n &gt;= 0, m &gt;= 0 } U { a^n b^m c^m : n &gt;= 0, m &gt;= 0 }</code>
</I>
<P>
<I>Esto  es: Concatenaciones de repeticiones 
de <code>a</code>s seguidas de repeticiones de <code>b</code>s y seguidas de
repeticiones de <code>c</code>s donde el número
de <code>a</code>s es igual al número de <code>b</code>s
o bien el número de <code>b</code>s es igual al número de <code>c</code>s.
</I>
<P>
<UL>
<LI>Escriba una gramática que genere dicho lenguaje

<P>
<PRE>
  s: aeqb | beqc ;
  aeqb: ab cs ;
  ab: /* empty */ | 'a' ab 'b' ;
  cs: /* empty */ | cs 'c' ;
  beqc: as bc ;
  bc: /* empty */ | 'b' bc 'c' ;
  as: /* empty */ | as 'a' ;
</PRE>

<P>
The symbol <code>aeqb</code> correspond to guess that there are the same number
of <code>a</code>s than <code>b</code>s.  In the same way, <code>beqc</code> starts the subgrammar
for those phrases where the number of <code>b</code>s is equal to the number
of <code>c</code>s. The usual approach to eliminate the ambiguity by changing
the grammar to an unambiguous one does not work.

<P>
</LI>
<LI>Escriba un programa Jison que reconozca este lenguaje.
</LI>
</UL></DIV><P></P>

<P>

<H4><A NAME="SECTION045173010000000000000">
Donde</A>
</H4>
  

<P>

<UL>
<LI><PRE>
[~/jison/jison-ambiguouslanguage(master)]$ pwd -P
/Users/casiano/local/src/javascript/PLgrado/jison/jison-ambiguouslanguage
</PRE>
</LI>
<LI><PRE>
[~/jison/jison-ambiguouslanguage(master)]$ git remote -v
origin  git@github.com:crguezl/jison-ambiguouslanguage.git (fetch)
origin  git@github.com:crguezl/jison-ambiguouslanguage.git (push)
</PRE>
</LI>
<LI><A NAME="tex2html305"
  HREF="https://github.com/crguezl/jison-ambiguouslanguage">https://github.com/crguezl/jison-ambiguouslanguage</A>
</LI>
</UL>

<P>

<H2><A NAME="SECTION045174000000000000000">
Conflicto reduce-reduce</A>
</H2>
La siguiente gramática presenta conflictos reduce-reduce:
<P>
<DIV><B>Ejercicio  <SPAN CLASS="arabic">5</SPAN>.<SPAN CLASS="arabic">17</SPAN>.<SPAN CLASS="arabic">3</SPAN></B> &nbsp; <PRE>
[~/srcPLgrado/jison/jison-reducereduceconflict]$ cat reducereduceconflictPPCR2.y
%token ID

%%

def:    param_spec return_spec ','
        ;
param_spec:
             type
        |    name_list ':' type
        ;
return_spec:
             type
        |    name ':' type
        ;
type:        
             ID
        ;
name:        
             ID 
        ;
name_list:
             name
        |    name ',' name_list
        ;
%%
</PRE><I>
Este es el diagnóstico de Jison:
</I><PRE>
~/srcPLgrado/jison/jison-reducereduceconflict]$ jison reducereduceconflictPPCR2.y
Conflict in grammar: multiple actions possible when lookahead token is ID in state 5
- reduce by rule: name -&gt; ID
- reduce by rule: type -&gt; ID
Conflict in grammar: multiple actions possible when lookahead token is : in state 5
- reduce by rule: name -&gt; ID
- reduce by rule: type -&gt; ID
Conflict in grammar: multiple actions possible when lookahead token is , in state 5
- reduce by rule: name -&gt; ID
- reduce by rule: type -&gt; ID

States with conflicts:
State 5
  type -&gt; ID . #lookaheads= ID : ,
  name -&gt; ID . #lookaheads= ID : ,
</PRE><I>
Este es el resultado de compilar con <code>bison -v</code>:
</I><PRE>
[~/jison/jison-reducereduceconflict(master)]$ bison -v reducereduceconflictPPCR2.y
reducereduceconflictPPCR2.y: conflicts: 1 reduce/reduce
</PRE><I>
El fichero <code>reducereduceconflictPPCR2.output</code> queda así:
</I><PRE>
[~/jison/jison-reducereduceconflict(master)]$ cat reducereduceconflictPPCR2.output 
State 1 conflicts: 1 reduce/reduce


Grammar

    0 $accept: def $end

    1 def: param_spec return_spec ','

    2 param_spec: type
    3           | name_list ':' type

    4 return_spec: type
    5            | name ':' type

    6 type: ID

    7 name: ID

    8 name_list: name
    9          | name ',' name_list


Terminals, with rules where they appear

$end (0) 0
',' (44) 1 9
':' (58) 3 5
error (256)
ID (258) 6 7


Nonterminals, with rules where they appear

$accept (6)
    on left: 0
def (7)
    on left: 1, on right: 0
param_spec (8)
    on left: 2 3, on right: 1
return_spec (9)
    on left: 4 5, on right: 1
type (10)
    on left: 6, on right: 2 3 4 5
name (11)
    on left: 7, on right: 5 8 9
name_list (12)
    on left: 8 9, on right: 3 9


state 0

    0 $accept: . def $end

    ID  shift, and go to state 1

    def         go to state 2
    param_spec  go to state 3
    type        go to state 4
    name        go to state 5
    name_list   go to state 6


state 1

    6 type: ID .
    7 name: ID .

    ','       reduce using rule 6 (type)
    ','       [reduce using rule 7 (name)]
    ':'       reduce using rule 7 (name)
    $default  reduce using rule 6 (type)


state 2

    0 $accept: def . $end

    $end  shift, and go to state 7


state 3

    1 def: param_spec . return_spec ','

    ID  shift, and go to state 1

    return_spec  go to state 8
    type         go to state 9
    name         go to state 10


state 4

    2 param_spec: type .

    $default  reduce using rule 2 (param_spec)


state 5

    8 name_list: name .
    9          | name . ',' name_list

    ','  shift, and go to state 11

    $default  reduce using rule 8 (name_list)


state 6

    3 param_spec: name_list . ':' type

    ':'  shift, and go to state 12


state 7

    0 $accept: def $end .

    $default  accept


state 8

    1 def: param_spec return_spec . ','

    ','  shift, and go to state 13


state 9

    4 return_spec: type .

    $default  reduce using rule 4 (return_spec)


state 10

    5 return_spec: name . ':' type

    ':'  shift, and go to state 14


state 11

    9 name_list: name ',' . name_list

    ID  shift, and go to state 15

    name       go to state 5
    name_list  go to state 16


state 12

    3 param_spec: name_list ':' . type

    ID  shift, and go to state 17

    type  go to state 18


state 13

    1 def: param_spec return_spec ',' .

    $default  reduce using rule 1 (def)


state 14

    5 return_spec: name ':' . type

    ID  shift, and go to state 17

    type  go to state 19


state 15

    7 name: ID .

    $default  reduce using rule 7 (name)


state 16

    9 name_list: name ',' name_list .

    $default  reduce using rule 9 (name_list)


state 17

    6 type: ID .

    $default  reduce using rule 6 (type)


state 18

    3 param_spec: name_list ':' type .

    $default  reduce using rule 3 (param_spec)


state 19

    5 return_spec: name ':' type .

    $default  reduce using rule 5 (return_spec)
</PRE><I>
Encuentre una gramática equivalente a la anterior sin conflictos.</I></DIV><P></P>

<P>

<H4><A NAME="SECTION045174010000000000000">
Solución</A>
</H4>
  

When the problem arises, you can often fix it by identifying the two parser states that are being confused, and adding something to make them look distinct. In the above example, adding one rule to <code>return_spec</code> as follows makes the problem go away: 

<P>
<PRE>
%token BOGUS
...
%%
...
return_spec:
             type
        |    name ':' type
        /* This rule is never used.  */
        |    ID BOGUS
        ;
</PRE>
This corrects the problem because it introduces the possibility of an additional active rule in the context after the ID at the beginning of <code>return_spec</code>. This rule is not active in the corresponding context in a <code>param_spec</code>, so the two contexts receive distinct parser states. As long as the token BOGUS is never generated by yylex, the added rule cannot alter the way actual input is parsed.

<P>
In this particular example, there is another way to solve the problem: rewrite the rule for <code>return_spec</code> to use ID directly instead of via name. This also causes the two confusing contexts to have different sets of active rules, because the one for <code>return_spec</code> activates the altered rule for <code>return_spec</code> rather than the one for name. 

<P>
<PRE>
param_spec:
             type
        |    name_list ':' type
        ;
return_spec:
             type
        |    ID ':' type
        ;
</PRE>

<P>

<H4><A NAME="SECTION045174020000000000000">
Donde</A>
</H4>
  

<UL>
<LI><PRE>
[~/jison/jison-reducereduceconflict(master)]$ pwd -P
/Users/casiano/local/src/javascript/PLgrado/jison/jison-reducereduceconflict
</PRE>
</LI>
<LI><PRE>
[~/jison/jison-reducereduceconflict(master)]$ git remote -v
origin  git@github.com:crguezl/ull-etsii-grado-PL-reducereduce.git (fetch)
origin  git@github.com:crguezl/ull-etsii-grado-PL-reducereduce.git (push)
</PRE>
</LI>
<LI><A NAME="tex2html306"
  HREF="https://github.com/crguezl/ull-etsii-grado-PL-reducereduce">https://github.com/crguezl/ull-etsii-grado-PL-reducereduce</A>
</LI>
</UL>

<P>

<H4><A NAME="SECTION045174030000000000000">
Véase</A>
</H4>
  

Véase
<A NAME="tex2html307"
  HREF="http://ftp.gnu.org/old-gnu/Manuals/bison-1.35/html_node/Mystery-Conflicts.html">Mysterious Reduce/Reduce Conflicts</A>
<P>

<DIV CLASS="navigation"><HR>
<A NAME="tex2html1967"
  HREF="node62.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html1961"
  HREF="node44.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html1955"
  HREF="node60.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html1963"
  HREF="node88.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1965"
  HREF="node91.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/perlexamples/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="Apuntes de LPP"></A><A NAME="tex2html3"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5669"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2014/2015"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2013/2014"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="https://plus.google.com/u/0/communities/103299470687051533933"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1415"></A><A NAME="tex2html7"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html8"
  HREF="http://www.ull.es/view/centros/etsii/Grado_en_Ingenieria_Informatica/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html9"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html10"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html1968"
  HREF="node62.html">Recuperación de Errores</A>
<B>Sup:</B> <A NAME="tex2html1962"
  HREF="node44.html">Análisis Sintáctico Ascendente en</A>
<B> Ant:</B> <A NAME="tex2html1956"
  HREF="node60.html">Definición Dirigida por la</A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
<I>Casiano Rodríguez León <BR>
2015-02-06</I>
</ADDRESS>
</BODY>
</HTML>
