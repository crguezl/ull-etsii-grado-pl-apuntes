<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>rackup</TITLE>
<META NAME="description" CONTENT="rackup">
<META NAME="keywords" CONTENT="javascriptexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node120.html">
<LINK REL="previous" HREF="node118.html">
<LINK REL="up" HREF="node104.html">
<LINK REL="next" HREF="node120.html">
</HEAD>

<BODY >

<DIV CLASS="navigation">
<A NAME="tex2html4775"
  HREF="node120.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html4769"
  HREF="node104.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html4763"
  HREF="node118.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html4771"
  HREF="node228.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html4773"
  HREF="node231.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~plgrado/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1213m2/course/view.php?id=271"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="http://crguezl.github.io/pl-html/"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html7"
  HREF="https://developer.mozilla.org/es/docs/JavaScript"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html8"
  HREF="http://github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html9"
  HREF="https://plus.google.com/u/0/communities/107031495100582318205"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1314"></A><A NAME="tex2html10"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html11"
  HREF="http://www.ull.es/view/centros/etsii/Grado/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html12"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html13"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html4776"
  HREF="node120.html">Rack::Static</A>
<B>Sup:</B> <A NAME="tex2html4770"
  HREF="node104.html">Rack, un Webserver Ruby</A>
<B> Ant:</B> <A NAME="tex2html4764"
  HREF="node118.html">La Estructura de una</A>
<B> Con:</B> 
<A NAME="tex2html4771"
  HREF="node228.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>
<B> Ind:</B> 
<A NAME="tex2html4773"
  HREF="node231.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A>
<BR> <P>
</DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><UL>
<LI><UL>
<LI><A NAME="tex2html4777"
  HREF="node119.html#SECTION061150010000000000000">Introducción</A>
<LI><A NAME="tex2html4778"
  HREF="node119.html#SECTION061150020000000000000">Ejemplo de uso</A>
<LI><A NAME="tex2html4779"
  HREF="node119.html#SECTION061150030000000000000">Ejecución</A>
<LI><A NAME="tex2html4780"
  HREF="node119.html#SECTION061150040000000000000">Opciones del ejecutable <TT>rackup</TT></A>
<LI><A NAME="tex2html4781"
  HREF="node119.html#SECTION061150050000000000000">Especificación de Opciones en la primera línea</A>
</UL></UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION061150000000000000000">
rackup</A>
</H1>

<P>

<H4><A NAME="SECTION061150010000000000000">
Introducción</A>
</H4>
  

<OL>
<LI>The <A NAME="tex2html570"
  HREF="http://rack.rubyforge.org/doc/">Rack</A> gem gives you a 
rackup command which lets you start your app on
any supported application server. 

<P>
</LI>
<LI>rackup is a useful tool for
running Rack applications, which uses the <A NAME="tex2html571"
  HREF="http://rack.rubyforge.org/doc/Rack/Builder.html">Rack::Builder</A> DSL to
configure middleware and build up applications easily. 

<P>
</LI>
<LI>rackup
automatically figures out the environment it is run in, and runs
your application as FastCGI, CGI, or standalone with Mongrel or
WEBrick, all from the same configuration.
</LI>
</OL>

<P>
De hecho este es todo el código del ejecutable 
<A NAME="tex2html572"
  HREF="https://github.com/rack/rack/blob/master/bin/rackup">rackup</A>
<PRE>
#!/usr/bin/env ruby

require "rack"
Rack::Server.start
</PRE>

<P>
El método  <TT>start</TT> 
starts a new rack server (like running rackup). This will parse <code>ARGV</code> and
provide standard <code>ARGV</code> rackup options, defaulting to load <code>config.ru</code>.

<P>
Providing an option hash will prevent <code>ARGV</code> parsing and will not include
any default options.

<P>
This method can be used to very easily launch a CGI application, for
example:

<P>
<PRE>
  Rack::Server.start(
    :app =&gt; lambda do |e|
      [200, {'Content-Type' =&gt; 'text/html'}, ['hello world']]
    end,
    :server =&gt; 'cgi'
  )
</PRE>

<P>
Further options available here are documented on <A NAME="tex2html573"
  HREF="http://rack.rubyforge.org/doc/Rack/Server.html">Rack::Server</A><code>#initialize</code>
(véase el código en 
<A NAME="tex2html574"
  HREF="https://github.com/rack/rack/blob/master/lib/rack/server.rb">Rack::Server</A>
):
<PRE>
    def self.start(options = nil)
      new(options).start
    end
</PRE>

<P>
como se ve, el código 
de

<A NAME="tex2html575"
  HREF="https://github.com/rack/rack/blob/master/lib/rack/server.rb">Rack::Server</A>

está en
Github.

<P>
The Options of <code>start</code> and <code>new</code>  may include:

<OL>
<LI><code>:app</code>
    a rack application to run (overrides :config)
</LI>
<LI><code>:config</code>
    a rackup configuration file path to load (.ru)
</LI>
<LI><code>:environment</code>
    this selects the middleware that will be wrapped around
    your application. Default options available are:
    
<OL>
<LI>development: CommonLogger, ShowExceptions, and Lint
</LI>
<LI>deployment: CommonLogger
</LI>
<LI>none: no extra middleware
    
</LI>
</OL>
    note: when the server is a cgi server, CommonLogger is not included.
</LI>
<LI><code>:server</code>
    choose a specific Rack::Handler, e.g. cgi, fcgi, webrick
</LI>
<LI><code>:daemonize</code>
    if true, the server will daemonize itself (fork, detach, etc)
</LI>
<LI><code>:pid</code>
    path to write a pid file after daemonize
</LI>
<LI><code>:Host</code>
    the host address to bind to (used by supporting Rack::Handler)
</LI>
<LI><code>:Port</code>
    the port to bind to (used by supporting Rack::Handler)
</LI>
<LI><code>:AccessLog</code>
    webrick acess log options (or supporting Rack::Handler)
</LI>
<LI><code>:debug</code>
    turn on debug output <code>($DEBUG = true)</code>
</LI>
<LI><code>:warn</code>
    turn on warnings (<code>$-w = true</code>)
</LI>
<LI><code>:include</code>
    add given paths to <code>$LOAD_PATH</code>
</LI>
<LI><code>:require</code>
    require the given libraries
</LI>
</OL>

<P>

<H4><A NAME="SECTION061150020000000000000">
Ejemplo de uso</A>
</H4>
  

<P>
Si no se especifica, <code>rackup</code> busca un fichero con nombre <code>config.ru</code>.
<PRE>
[~/local/src/ruby/sinatra/rack/rackup/simple(master)]$ cat config.ru 
require './myapp'
run MyApp.new
</PRE>

<P>
Esta es la aplicación:
<PRE>
[~/local/src/ruby/sinatra/rack/rackup/simple(master)]$ cat myapp.rb 
class MyApp
  def call env
    [200, {"Content-Type" =&gt; "text/html"}, ["Hello Rack Participants"]] 
  end
end
</PRE>

<P>
<PRE>
[~/local/src/ruby/sinatra/rack/rackup/simple(master)]$ cat Rakefile 
task :default =&gt; :server

desc "run server"
task :server do
  sh "rackup"
end

desc "run client via curl"
task :client do
  sh "curl -v localhost:9292"
end
</PRE>

<P>

<H4><A NAME="SECTION061150030000000000000">
Ejecución</A>
</H4>
  

<P>
<PRE>
[~/local/src/ruby/sinatra/rack/rackup/simple(master)]$ rackup
&gt;&gt; Thin web server (v1.5.1 codename Straight Razor)
&gt;&gt; Maximum connections set to 1024
&gt;&gt; Listening on 0.0.0.0:9292, CTRL+C to stop
</PRE>

<P>
<PRE>
[~/local/src/ruby/sinatra/rack/rackup/simple(master)]$ curl -v localhost:9292
* About to connect() to localhost port 9292 (#0)
*   Trying ::1... Connection refused
*   Trying 127.0.0.1... connected
* Connected to localhost (127.0.0.1) port 9292 (#0)
&gt; GET / HTTP/1.1
&gt; User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8y zlib/1.2.5
&gt; Host: localhost:9292
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/html
&lt; Transfer-Encoding: chunked
&lt; Connection: close
&lt; Server: thin 1.5.1 codename Straight Razor
&lt; 
* Closing connection #0
Hello Rack Participants
</PRE>

<P>

<H4><A NAME="SECTION061150040000000000000">
Opciones del ejecutable <TT>rackup</TT></A>
</H4>
  

<OL>
<LI>Véase <A NAME="tex2html576"
  HREF="http://manpages.debian.net/cgi-bin/man.cgi?query=rackup"><TT>rackup</TT></A>.
</LI>
</OL>

<P>
<PRE>
[~]$ rackup --help
Usage: rackup [ruby options] [rack options] [rackup config]

Ruby options:
  -e, --eval LINE          evaluate a LINE of code
  -d, --debug              set debugging flags (set $DEBUG to true)
  -w, --warn               turn warnings on for your script
  -I, --include PATH       specify $LOAD_PATH (may be used more than once)
  -r, --require LIBRARY    require the library, before executing your script

Rack options:
  -s, --server SERVER      serve using SERVER (webrick/mongrel)
  -o, --host HOST          listen on HOST (default: 0.0.0.0)
  -p, --port PORT          use PORT (default: 9292)
  -O NAME[=VALUE],         pass VALUE to the server as option NAME. 
                           If no VALUE, sets it to true. 
                           Run 
                           'rackup -s SERVER -h' 
                           to get a list of options for SERVER
      --option
  -E, --env ENVIRONMENT    use ENVIRONMENT for defaults (default: development)
  -D, --daemonize          run daemonized in the background
  -P, --pid FILE           file to store PID (default: rack.pid)

Common options:
  -h, -?, --help           Show this message
      --version            Show version
</PRE>

<P>

<H4><A NAME="SECTION061150050000000000000">
Especificación de Opciones en la primera línea</A>
</H4>
  

Si la primera línea de un fichero <code>config.ru</code> empieza por <code>\#</code> es tratada 
como una línea de opciones permitiendo así que los argumentos de  <TT>rackup</TT> 
se especifiquen en el fichero de configuración:

<P>
<PRE>
#\-w -p 8765

use Rack::Reloader, 0
use Rack::ContentLength

app = proc do |env|
  [200, {'content-Type' =&gt; 'text/plain' }, ['a']]
end

run app
</PRE>

<P>

<DIV CLASS="navigation"><HR>
<A NAME="tex2html4775"
  HREF="node120.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html4769"
  HREF="node104.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html4763"
  HREF="node118.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html4771"
  HREF="node228.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html4773"
  HREF="node231.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~plgrado/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1213m2/course/view.php?id=271"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="http://crguezl.github.io/pl-html/"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html7"
  HREF="https://developer.mozilla.org/es/docs/JavaScript"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html8"
  HREF="http://github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html9"
  HREF="https://plus.google.com/u/0/communities/107031495100582318205"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1314"></A><A NAME="tex2html10"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html11"
  HREF="http://www.ull.es/view/centros/etsii/Grado/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html12"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html13"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html4776"
  HREF="node120.html">Rack::Static</A>
<B>Sup:</B> <A NAME="tex2html4770"
  HREF="node104.html">Rack, un Webserver Ruby</A>
<B> Ant:</B> <A NAME="tex2html4764"
  HREF="node118.html">La Estructura de una</A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
<I>Casiano Rodríguez León <BR>
2014-04-28</I>
</ADDRESS>
</BODY>
</HTML>
