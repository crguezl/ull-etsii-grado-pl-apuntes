<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Práctica: Conversor de Temperaturas con Karma y Travis</TITLE>
<META NAME="description" CONTENT="Práctica: Conversor de Temperaturas con Karma y Travis">
<META NAME="keywords" CONTENT="javascriptexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node11.html">
<LINK REL="previous" HREF="node9.html">
<LINK REL="up" HREF="node7.html">
<LINK REL="next" HREF="node11.html">
</HEAD>

<BODY >

<DIV CLASS="navigation">
<A NAME="tex2html1002"
  HREF="node11.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html996"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html990"
  HREF="node9.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html998"
  HREF="node90.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1000"
  HREF="node93.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/perlexamples/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="Apuntes de LPP"></A><A NAME="tex2html3"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5669"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2014/2015"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2013/2014"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="https://plus.google.com/u/0/communities/103299470687051533933"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1415"></A><A NAME="tex2html7"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html8"
  HREF="http://www.ull.es/view/centros/etsii/Grado_en_Ingenieria_Informatica/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html9"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html10"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html1003"
  HREF="node11.html">Práctica: Comma Separated Values.</A>
<B>Sup:</B> <A NAME="tex2html997"
  HREF="node7.html">Expresiones Regulares y Análisis</A>
<B> Ant:</B> <A NAME="tex2html991"
  HREF="node9.html">Práctica: Conversor de Temperaturas</A>
<B> Con:</B> 
<A NAME="tex2html998"
  HREF="node90.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>
<B> Ind:</B> 
<A NAME="tex2html1000"
  HREF="node93.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A>
<BR> <P>
</DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><UL>
<LI><UL>
<LI><A NAME="tex2html1004"
  HREF="node10.html#SECTION04130010000000000000">Requisitos</A>
<LI><A NAME="tex2html1005"
  HREF="node10.html#SECTION04130020000000000000">Karma</A>
<LI><A NAME="tex2html1006"
  HREF="node10.html#SECTION04130030000000000000">Karma: Como Funciona</A>
<LI><A NAME="tex2html1007"
  HREF="node10.html#SECTION04130040000000000000">Karma: Videos</A>
<LI><A NAME="tex2html1008"
  HREF="node10.html#SECTION04130050000000000000">Karma: Opciones en Línea de Comandos</A>
<LI><A NAME="tex2html1009"
  HREF="node10.html#SECTION04130060000000000000">Karma: Generando el Fichero de Configuración</A>
<LI><A NAME="tex2html1010"
  HREF="node10.html#SECTION04130070000000000000">Arrancando Karma. Starting Karma</A>
<LI><A NAME="tex2html1011"
  HREF="node10.html#SECTION04130080000000000000">Using Karma with Mocha</A>
<LI><A NAME="tex2html1012"
  HREF="node10.html#SECTION04130090000000000000">Algunas dependencias para ejecutar Karma</A>
<LI><A NAME="tex2html1013"
  HREF="node10.html#SECTION041300100000000000000">Load HTML files with Karma</A>
<LI><A NAME="tex2html1014"
  HREF="node10.html#SECTION041300110000000000000">tests/tests.js usando Karma y Considerando el HTML</A>
<LI><A NAME="tex2html1015"
  HREF="node10.html#SECTION041300120000000000000">tests/test.html usando Karma y Considerando el HTML</A>
<LI><A NAME="tex2html1016"
  HREF="node10.html#SECTION041300130000000000000">Karma y HTML: Véase</A>
<LI><A NAME="tex2html1017"
  HREF="node10.html#SECTION041300140000000000000">Karma y Gulp</A>
</UL></UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION04130000000000000000"></A>
   <A NAME="2584"></A>
  
<A NAME="sectionpractica:conversordetemperaturasconkarmaytravis"></A>
<BR>
Práctica: Conversor de Temperaturas con Karma y Travis
</H1>

<P>

<H4><A NAME="SECTION04130010000000000000">
Requisitos</A>
</H4>
  

<P>

<UL>
<LI>Añada a la práctica de la temperatura los elementos necesarios para la ejecución de las pruebas mediante Karma.
</LI>
<LI>Añada integración contínua usando Travis (travis-ci.org)
</LI>
<LI>Añada el badge de Travis en el <code>README.md</code>
</LI>
<LI>Añada tareas en el `Gulpfile` para la ejecución de las pruebas mediante Karma.
</LI>
<LI>Añada (si no lo hizo en la práctica anterior) cubrimiento con blanket.
</LI>
</UL>

<P>
Lea

<UL>
<LI><A NAME="tex2html61"
  HREF="http://karma-runner.github.io/0.12/plus/travis.html">Karma Travis CI</A>.
</LI>
<LI>El capítulo 
<A NAME="tex2html62"
  HREF="http://nereida.deioc.ull.es/~lpp/perlexamples/">Integración Contínua: Travis</A>
de los apuntes de LPP
</LI>
<LI><A NAME="tex2html63"
  HREF="http://docs.travis-ci.com/user/languages/javascript-with-nodejs/">Travis CI: Building a Node.js project</A>
</LI>
</UL>

<P>

<H4><A NAME="SECTION04130020000000000000">
Karma</A>
</H4>
  

<P>

<H4><A NAME="SECTION04130030000000000000">
Karma: Como Funciona</A>
</H4>
  

<P>

<UL>
<LI><A NAME="3327"></A><SPAN  CLASS="textbf">Karma</SPAN> (See 
<A NAME="tex2html65"
  HREF="http://karma-runner.github.io/0.10/intro/installation.html">Karma installation</A>)
is essentially a tool which spawns a web server that executes source
code against test code for each of the browsers connected. 

<P>
</LI>
<LI>The results
for each test against each browser are examined and displayed via the
command line to the developer such that they can see which browsers and
tests passed or failed.

<P>
</LI>
<LI>A browser can be captured either
  
<UL>
<LI>manually, by visiting the URL where the Karma server is listening (typically <code>http://localhost:9876/</code>)
</LI>
<LI>or automatically by letting Karma know which browsers to start when Karma is run 
  
</LI>
</UL>
</LI>
</UL>

<P>

<UL>
<LI>Karma also watches all the files, specified within the configuration file,
and whenever any file changes, it triggers the test run by sending a
signal the testing server to inform all of the captured browsers to run
the test code again. 
</LI>
<LI>Each browser then loads the source files inside an
<code>IFrame</code><A NAME="tex2html64"
  HREF="footnode.html#foot3320"><SUP><SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">1</SPAN></SUP></A>, 
executes the tests and reports the results back to the server.
</LI>
<LI>The server collects the results from all of the captured browsers and presents them to the developer.
</LI>
</UL>

<P>

<H4><A NAME="SECTION04130040000000000000">
Karma: Videos</A>
</H4>
  

<UL>
<LI><A NAME="tex2html66"
  HREF="http://youtu.be/5mHjJ4xf_K0">JS.everywhere(Europe) 2012: Testacular, the Spectacular JavaScript Test Runner - Vojta Jína</A>
YouTube
</LI>
<LI><A NAME="tex2html67"
  HREF="https://egghead.io/lessons/unit-testing-introduction-to-karma">Introduction to Karma</A>
Screencast.
</LI>
<LI><A NAME="tex2html68"
  HREF="http://youtu.be/YG5DEzaQBIc">Google Test Automation Conference GTAC 2013: Karma - Test Runner for JavaScript</A>
Vojta Jína. YouTube
</LI>
</UL>

<P>

<H4><A NAME="SECTION04130050000000000000">
Karma: Opciones en Línea de Comandos</A>
</H4>
  

<PRE>
[~/srcPLgrado/mocha-chai-browser-demo(master)]$ karma --help
Karma - Spectacular Test Runner for JavaScript.

Usage:
  /usr/local/bin/karma &lt;command&gt;

Commands:
  start [&lt;configFile&gt;] [&lt;options&gt;] Start the server / do single run.
  init [&lt;configFile&gt;] Initialize a config file.
  run [&lt;options&gt;] [ -- &lt;clientArgs&gt;] Trigger a test run.
  completion Shell completion for karma.

Run --help with particular command to see its description and available options.

Options:
  --help     Print usage and options.
  --version  Print current version.
</PRE>

<P>

<H4><A NAME="SECTION04130060000000000000">
Karma: Generando el Fichero de Configuración</A>
</H4>
  

In order to serve us well, Karma needs to know about our project in
order to test it and this is done via a configuration file. 

<P>
The configuration file can be generated using <code>karma init</code>:
<PRE>
$ karma init my.conf.js

Which testing framework do you want to use ?
Press tab to list possible options. Enter to move to the next question.
&gt; jasmine
</PRE>

<P>
<PRE>
Do you want to use Require.js ?
This will add Require.js plugin.
Press tab to list possible options. Enter to move to the next question.
&gt; no
</PRE>

<P>
<A NAME="tex2html69"
  HREF="http://requirejs.org/">http://requirejs.org/</A>
<P>
<PRE>
Do you want to capture a browser automatically ?
Press tab to list possible options. Enter empty string to move to the next question.
&gt; Chrome
</PRE>

<P>
<PRE>
What is the location of your source and test files ?
You can use glob patterns, eg. "js/*.js" or "test/**/*Spec.js".
Enter empty string to move to the next question.
&gt; 

Should any of the files included by the previous patterns be excluded ?
You can use glob patterns, eg. "**/*.swp".
Enter empty string to move to the next question.


Do you want Karma to watch all the files and run the tests on change ?
Press tab to list possible options.
&gt; yes

Config file generated at "/Users/casiano/local/src/javascript/PLgrado/mocha-tutorial/karma.conf.js".
</PRE>

<P>
The configuration file can be written in CoffeeScript as well. In fact,
if you execute <code>karma init</code> with a <code>.coffee</code> filename extension, it will
generate a CoffeeScript file.

<P>
Of course, you can write the config file by hand or copy paste it from another project ;-)

<P>
<PRE>
[~/srcPLgrado/mocha-tutorial]$ cat karma.conf.js 
// Karma configuration
// Generated on Mon Jan 20 2014 16:21:22 GMT+0000 (WET)

module.exports = function(config) {
  config.set({

    // base path, that will be used to resolve files and exclude
    basePath: '',


    // frameworks to use
    frameworks: ['jasmine'],


    // list of files / patterns to load in the browser
    files: [
      
    ],


    // list of files to exclude
    exclude: [
      
    ],


    // test results reporter to use
    // possible values: 'dots', 'progress', 'junit', 'growl', 'coverage'
    reporters: ['progress'],


    // web server port
    port: 9876,


    // enable / disable colors in the output (reporters and logs)
    colors: true,


    // level of logging
    // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG
    logLevel: config.LOG_INFO,


    // enable / disable watching file and executing tests whenever any file changes
    autoWatch: true,


    // Start these browsers, currently available:
    // - Chrome
    // - ChromeCanary
    // - Firefox
    // - Opera (has to be installed with `npm install karma-opera-launcher`)
    // - Safari (only Mac; has to be installed with `npm install karma-safari-launcher`)
    // - PhantomJS
    // - IE (only Windows; has to be installed with `npm install karma-ie-launcher`)
    browsers: ['Chrome', 'Firefox'],


    // If browser does not capture in given timeout [ms], kill it
    captureTimeout: 60000,


    // Continuous Integration mode
    // if true, it capture browsers, run tests and exit
    singleRun: false
  });
};
</PRE>

<P>

<H4><A NAME="SECTION04130070000000000000">
Arrancando Karma. Starting Karma</A>
</H4>
  

<P>
When starting Karma, the configuration file path can be passed in as the first argument.
By default, Karma will look for <code>karma.conf.js</code> in the current directory.
<PRE>
# Start Karma using your configuration
$ karma start my.conf.js
</PRE>

<P>
Some configurations, which are already present within the configuration
file, can be overridden by specifying the configuration as a command
line argument for when Karma is executed.
<PRE>
karma start karma-conf.js --command-one --command-two
</PRE>

<P>
<PRE>
[~/srcPLgrado/mocha-tutorial]$ karma start --help
Karma - Spectacular Test Runner for JavaScript.

START - Start the server / do a single run.

Usage:
  /usr/local/bin/karma start [&lt;configFile&gt;] [&lt;options&gt;]

Options:
  --port                &lt;integer&gt; Port where the server is running.                            
  --auto-watch          Auto watch source files and run on change.                             
  --no-auto-watch       Do not watch source files.                                             
  --log-level           &lt;disable | error | warn | info | debug&gt; Level of logging.              
  --colors              Use colors when reporting and printing logs.                           
  --no-colors           Do not use colors when reporting or printing logs.                     
  --reporters           List of reporters (available: dots, progress, junit, growl, coverage). 
  --browsers            List of browsers to start (eg. --browsers Chrome,ChromeCanary,Firefox).
  --capture-timeout     &lt;integer&gt; Kill browser if does not capture in given time [ms].         
  --single-run          Run the test when browsers captured and exit.                          
  --no-single-run       Disable single-run.                                                    
  --report-slower-than  &lt;integer&gt; Report tests that are slower than given time [ms].           
  --help                Print usage and options.
</PRE>

<P>

<H4><A NAME="SECTION04130080000000000000">
Using Karma with Mocha</A>
</H4>
  

To use Karma with Mocha
we need the karma-mocha adapter.

<P>
If we want to pass configuration options directly to mocha you can do this in the following way
<PRE>
// karma.conf.js
module.exports = function(config) {
  config.set({
    frameworks: ['mocha'],

    files: [
      '*.js'
    ],

    client: {
      mocha: {
        ui: 'tdd'
      }
    }
  });
};
</PRE>
(By default the <code>ui</code> is <code>bdd</code>).

<P>
Here is an example

<P>
<PRE>
[~/srcPLgrado/temperature(karma)]$ cat karma.conf.js 
// Karma configuration
// Generated on Thu Jan 29 2015 16:51:38 GMT+0000 (WET)

module.exports = function(config) {
  config.set({

    // base path, that will be used to resolve files and exclude
    basePath: '',

    // frameworks to use
    frameworks: ['mocha'],

    client: {
          mocha: {
            ui: 'tdd'
          }
    },

    preprocessors: {
          'tests/test.html': ['html2js']
    },


    // list of files / patterns to load in the browser
    files: [
      'tests/test.html',
      'tests/*.js',
      'temperature.js'
    ],


    // list of files to exclude
    exclude: [

    ],


    // test results reporter to use
    // possible values: 'dots', 'progress', 'junit', 'growl', 'coverage'
    reporters: ['progress'],


    // web server port
    port: 9876,


    // enable / disable colors in the output (reporters and logs)
    colors: true,


    // level of logging
    // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG
    logLevel: config.LOG_INFO,


    // enable / disable watching file and executing tests whenever any file changes
    autoWatch: true,


    // Start these browsers, currently available:
    // - Chrome
    // - ChromeCanary
    // - Firefox
    // - Opera (has to be installed with `npm install karma-opera-launcher`)
    // - Safari (only Mac; has to be installed with `npm install karma-safari-launcher`)
    // - PhantomJS
    // - IE (only Windows; has to be installed with `npm install karma-ie-launcher`)
    browsers: [
               'Chrome',
               'Firefox',
               'PhantomJS',
               ],


    // If browser does not capture in given timeout [ms], kill it
    captureTimeout: 60000,


    // Continuous Integration mode
    // if true, it capture browsers, run tests and exit
    singleRun: false
  });
};
</PRE>
Another example can be found at
(<A NAME="tex2html70"
  HREF="https://github.com/crguezl/nathanuniversityexercisesPL/blob/master/scheem8/karma.conf.js">https://github.com/crguezl/nathanuniversityexercisesPL/blob/master/scheem8/karma.conf.js</A>).

<P>

<H4><A NAME="SECTION04130090000000000000">
Algunas dependencias para ejecutar Karma</A>
</H4>
  

De hecho, para poder usar Karma con los diferentes navegadores es necesario
instalar unos cuantos módulos. Vea este fragmento de <code>package.json</code>
<PRE>
 "devDependencies": {
    "chai": "*",
    "mocha": "*",
    "karma": "*",
    "karma-mocha": "*",
    "karma-html2js-preprocessor": "*",
    "karma-chrome-launcher": "*",
    "karma-firefox-launcher": "*",
    "karma-phantomjs-launcher": "*"
  },
</PRE>

<P>

<H4><A NAME="SECTION041300100000000000000">
Load HTML files with Karma</A>
</H4>
  

<P>
If you have one html file:
<PRE>
[~/srcPLgrado/karma/html]$ cat template.html 
&lt;div id="tpl"&gt;content of the template&lt;/div&gt;
</PRE>
which you want to load and then get all elements
from that html page in your test script,
you can use the <code>html2js</code> preprocessor, which basically converts
HTML files into JavaScript strings and include these files.
<PRE>
[~/srcPLgrado/karma/html]$ cat karma.conf.js 
module.exports = function(karma) {
  karma.configure({
    basePath: '',
    frameworks: ['jasmine'],
    files: [ '*.js', '*.html' ], 
    preprocessors: { '*.html': 'html2js' },
    ....
</PRE>
Then, you can access these strings in your test:
<PRE>
[~/srcPLgrado/karma/html]$ cat test.js 
describe('template', function() {
  it('should expose the templates to __html__', function() {
    document.body.innerHTML = __html__['template.html'];
    expect(document.getElementById('tpl')).toBeDefined();
  })
})
</PRE>

<P>
Preprocessors in Karma allow you to do some work with your files before they get served to the browser. The configuration of these happens in this block in the config file.
<PRE>
preprocessors = {
  '**/*.coffee': 'coffee',
  '**/*.html': 'html2js'
};
</PRE>
<H4><A NAME="SECTION041300110000000000000">
tests/tests.js usando Karma y Considerando el HTML</A>
</H4>
  

Por tanto modificamos nuestro fichero <code>tests/tests.js</code> como sigue:
<PRE>
[~/srcPLgrado/temperature(karma)]$ cat tests/tests.js 
var assert = chai.assert;

suite('temperature', function() {
    setup(function(){
      if (typeof __html__ !== 'undefined') {
          document.body.innerHTML = __html__['tests/test.html'];
          original = document.getElementById('original');
          converted = document.getElementById('converted');
      }
    });

    test('32F = 0C', function() {
        original.value = "32F";
        calculate();
        assert.deepEqual(converted.innerHTML, "0.0 Celsius");
    });
    test('45C = 113.0 Farenheit', function() {
        original.value = "45C";
        calculate();
        assert.deepEqual(converted.innerHTML, "113.0 Farenheit");
    });
    test('5X = error', function() {
        original.value = "5X";
        calculate();
        assert.match(converted.innerHTML, /ERROR/);
    });
});
</PRE>

<P>

<H4><A NAME="SECTION041300120000000000000">
tests/test.html usando Karma y Considerando el HTML</A>
</H4>
  

El fichero <code>html</code> inicial también cambia, ya que Karma se encarga
de la carga de los ficheros HTML y de su pre-procesado:

<P>
<PRE>
[~/srcPLgrado/temperature(karma)]$ cat tests/test.html 
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Mocha&lt;/title&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;

  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="mocha"&gt;&lt;/div&gt;
    &lt;input id="original" placeholder="32F" size="50"&gt;
    &lt;span class="output" id="converted"&gt;&lt;/span&gt;

    &lt;script src="../temperature.js"&gt;&lt;/script&gt;
    &lt;script&gt;mocha.setup('tdd')&lt;/script&gt;
    &lt;script src="tests.js"&gt;&lt;/script&gt;

    &lt;script&gt;
      mocha.run();
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</PRE>
Obsérvese que no cargamos <code>mocha</code>, etc porque son cargados por Karma (como especificamos en el fichero de configuración).

<P>

<H4><A NAME="SECTION041300130000000000000">
Karma y HTML: Véase</A>
</H4>
  

See 

<UL>
<LI><A NAME="tex2html71"
  HREF="http://stackoverflow.com/questions/18317693/load-html-files-with-karma">Load HTML files with Karma</A>
in StackOverflow.
</LI>
<LI><A NAME="tex2html72"
  HREF="https://github.com/karma-runner/karma-html2js-preprocessor">karma-html2js-preprocessor</A>
</LI>
</UL>

<P>

<H4><A NAME="SECTION041300140000000000000">
Karma y Gulp</A>
</H4>
  

<P>
Para automatizar la ejecución de las pruebas con <code>karma</code> y <code>gulp</code>
añadimos un par de tareas a nuestor <code>gulpfile</code>. Las tareas <code>test</code> y
<code>default</code>:

<P>
<PRE>
[~/srcPLgrado/temperature(karma)]$ cat gulpfile.js 
var gulp    = require('gulp'),
    gutil   = require('gulp-util'),
    uglify  = require('gulp-uglify'),
    concat  = require('gulp-concat');
var karma   = require('gulp-karma');
...

gulp.task('test', function() {
  // Be sure to return the stream
  return gulp.src([])
    .pipe(karma({
      configFile: 'karma.conf.js',
      action: 'run'
    }))
    .on('error', function(err) {
      // Make sure failed tests cause gulp to exit non-zero
      throw err;
    });
});

gulp.task('default', function() {
  gulp.src([])
    .pipe(karma({
      configFile: 'karma.conf.js',
      action: 'watch'
    }));
});
</PRE>

<P>

<DIV CLASS="navigation"><HR>
<A NAME="tex2html1002"
  HREF="node11.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html996"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html990"
  HREF="node9.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html998"
  HREF="node90.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1000"
  HREF="node93.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/perlexamples/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="Apuntes de LPP"></A><A NAME="tex2html3"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5669"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2014/2015"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2013/2014"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="https://plus.google.com/u/0/communities/103299470687051533933"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1415"></A><A NAME="tex2html7"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html8"
  HREF="http://www.ull.es/view/centros/etsii/Grado_en_Ingenieria_Informatica/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html9"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html10"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html1003"
  HREF="node11.html">Práctica: Comma Separated Values.</A>
<B>Sup:</B> <A NAME="tex2html997"
  HREF="node7.html">Expresiones Regulares y Análisis</A>
<B> Ant:</B> <A NAME="tex2html991"
  HREF="node9.html">Práctica: Conversor de Temperaturas</A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
<I>Casiano Rodríguez León <BR>
2015-02-22</I>
</ADDRESS>
</BODY>
</HTML>
