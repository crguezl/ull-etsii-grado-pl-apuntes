<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Práctica: Ficheros INI</TITLE>
<META NAME="description" CONTENT="Práctica: Ficheros INI">
<META NAME="keywords" CONTENT="javascriptexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node17.html">
<LINK REL="previous" HREF="node15.html">
<LINK REL="up" HREF="node7.html">
<LINK REL="next" HREF="node17.html">
</HEAD>

<BODY >

<DIV CLASS="navigation">
<A NAME="tex2html1038"
  HREF="node17.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html1032"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html1026"
  HREF="node15.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html1034"
  HREF="node98.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1036"
  HREF="node101.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~plgrado/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1213m2/course/view.php?id=271"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="http://crguezl.github.io/pl-html/"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html7"
  HREF="https://developer.mozilla.org/es/docs/JavaScript"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html8"
  HREF="http://github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html9"
  HREF="https://plus.google.com/u/0/communities/107031495100582318205"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1314"></A><A NAME="tex2html10"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html11"
  HREF="http://www.ull.es/view/centros/etsii/Grado/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html12"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html13"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html1039"
  HREF="node17.html">Práctica: Analizador Léxico para</A>
<B>Sup:</B> <A NAME="tex2html1033"
  HREF="node7.html">Expresiones Regulares y Análisis</A>
<B> Ant:</B> <A NAME="tex2html1027"
  HREF="node15.html">Ejercicios</A>
<B> Con:</B> 
<A NAME="tex2html1034"
  HREF="node98.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>
<B> Ind:</B> 
<A NAME="tex2html1036"
  HREF="node101.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A>
<BR> <P>
</DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><UL>
<LI><UL>
<LI><A NAME="tex2html1040"
  HREF="node16.html#SECTION04190010000000000000">Donde</A>
<LI><A NAME="tex2html1041"
  HREF="node16.html#SECTION04190020000000000000">index.html</A>
<LI><A NAME="tex2html1042"
  HREF="node16.html#SECTION04190030000000000000">Ficheros</A>
<LI><A NAME="tex2html1043"
  HREF="node16.html#SECTION04190040000000000000">global.css</A>
<LI><A NAME="tex2html1044"
  HREF="node16.html#SECTION04190050000000000000">Ficheros de Prueba</A>
<LI><A NAME="tex2html1045"
  HREF="node16.html#SECTION04190060000000000000">ini.js</A>
<LI><A NAME="tex2html1046"
  HREF="node16.html#SECTION04190070000000000000">Dudas sobre la Sintáxis del Formato <TT>INI</TT></A>
<LI><A NAME="tex2html1047"
  HREF="node16.html#SECTION04190080000000000000">Tareas</A>
<LI><A NAME="tex2html1048"
  HREF="node16.html#SECTION04190090000000000000">Véase</A>
</UL></UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION04190000000000000000"></A>
   <A NAME="2627"></A>
<BR>
Práctica: Ficheros INI
</H1>

<P>

<H4><A NAME="SECTION04190010000000000000">
Donde</A>
</H4>
  

<PRE>
[~/srcPLgrado/ini(develop)]$ pwd -P
/Users/casiano/local/src/javascript/PLgrado/ini
[~/srcPLgrado/ini(develop)]$ git remote -v
origin  ssh://git@bitbucket.org/casiano/pl-grado-ini-files.git (fetch)
origin  ssh://git@bitbucket.org/casiano/pl-grado-ini-files.git (push)
</PRE>

<P>
Véase

<UL>
<LI>Repositorio conteniendo el código (inicial) del analizador de ficheros <code>ini</code>:
<A NAME="tex2html88"
  HREF="https://github.com/crguezl/pl-grado-ini-files">https://github.com/crguezl/pl-grado-ini-files</A>
</LI>
<LI>Despliegue en GitHub pages:
<A NAME="tex2html89"
  HREF="http://crguezl.github.io/pl-grado-ini-files/">http://crguezl.github.io/pl-grado-ini-files/</A>
</LI>
<LI>Repositorio privado del profesor: 
<A NAME="tex2html90"
  HREF="https://bitbucket.org/casiano/pl-grado-ini-files/src">https://bitbucket.org/casiano/pl-grado-ini-files/src</A>.
</LI>
</UL>
<H4><A NAME="SECTION04190020000000000000">
index.html</A>
</H4>
  

<PRE>
[~/javascript/PLgrado/ini(master)]$ cat index.html 
&lt;html&gt;
  &lt;head&gt;
     &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
     &lt;title&gt;INI files&lt;/title&gt;
     &lt;link href="global.css" rel="stylesheet" type="text/css"&gt;
&lt;!--
     &lt;link rel="shortcut icon" href="logo.png" /&gt;
--&gt;
     &lt;link rel="shortcut icon" href="etsiiull.png" type="image/x-icon"&gt;

     &lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"&gt;&lt;/script&gt;
     &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"&gt;&lt;/script&gt;

     &lt;script type="text/javascript" src="ini.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;INI files&lt;/h1&gt;
    &lt;input type="file" id="fileinput" /&gt;
    &lt;div id="out" class="hidden"&gt;
    &lt;table&gt;
      &lt;tr&gt;&lt;th&gt;Original&lt;/th&gt;&lt;th&gt;Tokens&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;
          &lt;pre class="input" id="initialinput"&gt;&lt;/pre&gt;
        &lt;/td&gt;
        &lt;td&gt;
          &lt;pre class="output" id="finaloutput"&gt;&lt;/pre&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</PRE>

<P>

<H4><A NAME="SECTION04190030000000000000">
Ficheros</A>
</H4>
  

<P>
Vease

<UL>
<LI><A NAME="tex2html91"
  HREF="http://www.html5rocks.com/en/tutorials/file/dndfiles/">Reading files in JavaScript using the File APIs</A>
by Eric Bidelman.

<P>
Source code in 
<A NAME="tex2html92"
  HREF="https://github.com/crguezl/files-in-javascript-tut">files-in-javascript-tut</A>
</LI>
<LI><A NAME="tex2html93"
  HREF="http://dev.w3.org/2006/webapi/FileAPI/#filereader-interface">W3C File API</A>
</LI>
<LI>Ejemplo <code>FileList</code> en 
  
<UL>
<LI><A NAME="tex2html94"
  HREF="https://github.com/crguezl/files-in-javascript-tut/blob/master/filelist.html">github</A>
</LI>
<LI>en acción en 
  <A NAME="tex2html95"
  HREF="http://crguezl.github.io/files-in-javascript-tut/filelist.html">gh-pages</A>.
</LI>
<LI>Tambien en 
  <A NAME="tex2html96"
  HREF="http://jsfiddle.net/casiano/GEDC9/">jsfiddle</A>
</LI>
<LI>o bien 
  <PRE>
  [~/src/javascript/fileapi/html5rocks]$ pwd -P
  /Users/casiano/local/src/javascript/fileapi/html5rocks
  [~/src/javascript/fileapi/html5rocks(master)]$ ls -l filelist.html 
  -rw-r--r--  1 casiano  staff  767 15 feb 17:21 filelist.html
</PRE>
</LI>
<LI>The 
  <A NAME="tex2html97"
  HREF="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener">EventTarget.addEventListener()</A>
method 
  <PRE>
  target.addEventListener(type, listener[, useCapture]);
</PRE>
  registers the specified listener on the <code>EventTarget</code> 
  it's called
  on. The event target may be an Element in a document, the Document
  itself, a Window, or any other object that supports events (such as
  <code>XMLHttpRequest</code>).
</LI>
<LI><PRE>
  &gt; date = new Date(Date.UTC(2012, 11, 12, 3, 0, 0));
  Wed Dec 12 2012 03:00:00 GMT+0000 (WET)
  &gt; date.toLocaleDateString()
  "12/12/2012"
</PRE>
</LI>
<LI><A NAME="tex2html98"
  HREF="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString">Date.prototype.toLocaleDateString()</A>
</LI>
</UL>
</LI>
<LI>Ejemplo de Drag and Drop en 

<UL>
<LI><A NAME="tex2html99"
  HREF="https://github.com/crguezl/files-in-javascript-tut/blob/master/dragandrop.html">GitHub</A>
</LI>
<LI><A NAME="tex2html100"
  HREF="http://crguezl.github.io/files-in-javascript-tut/dragandrop.html">gh-pages</A>
</LI>
<LI><A NAME="tex2html101"
  HREF="http://jsfiddle.net/casiano/H7U7X/">jsfiddle</A>
</LI>
</UL>
o bien en:
<PRE>
[~/src/javascript/fileapi/html5rocks]$ pwd -P
/Users/casiano/local/src/javascript/fileapi/html5rocks
[~/src/javascript/fileapi/html5rocks]$ ls -l dragandrop.html 
-rw-r--r--  1 casiano  staff  1535 15 feb 18:25 dragandrop.html
</PRE>
  
<UL>
<LI><code>stopPropagation</code> stops the event from 
<A NAME="tex2html102"
  HREF="http://www.w3.org/TR/DOM-Level-3-Events/#event-flow">bubbling up the event chain.</A>
<P>
Suppose you have a table and within that table you have an anchor
      tag. Both the table and the anchor tag have code to handle mouse
      clicks. When the user clicks on the anchor tag, which HTML element should
      process the event first? Should it be the table then the anchor tag or
      vice versa?

<P>
Formally, the event path is broken into three phases. 
      
<UL>
<LI>In the <A NAME="2640"></A><SPAN  CLASS="textit">capture phase</SPAN>, the event starts at the top of the DOM tree, and propagates through
      to the parent of the target. 
</LI>
<LI>In the <A NAME="2642"></A><SPAN  CLASS="textit">target phase</SPAN>, the event object arrives
      at its target. This is generally where you will write your event-handling
      code. 
</LI>
<LI>In the <A NAME="2644"></A><SPAN  CLASS="textit">bubble phase</SPAN>, the event will move back up through the tree
      until it reaches the top. Bubble phase propagation happens in reverse
      order to the capture phase, with an event starting at the parent of
      the target and ending up back at the top of the DOM tree. 
</LI>
<LI><A NAME="tex2html103"
  HREF="http://jsfiddle.net/casiano/7Kp4L/">jsfiddle</A>
</LI>
</UL>
      
      <img src="http://www.w3.org/TR/DOM-Level-3-Events/images/eventflow.png" alt="Graphical representation of an event dispatched in a DOM tree using the DOM event flow" title="Graphical representation of an event dispatched in a DOM tree using the DOM event flow" />

<P>
These days,
      there’s a choice to register an event in either the capture phase
      or the bubble phase. If you register an event in the capture phase,
      the parent element will process the event before the child element.

<P>
</LI>
<LI><code>preventDefault</code> prevents the default action the browser makes on that event.
  
</LI>
</UL>
</LI>
<LI>After you've obtained a <code>File</code> reference, instantiate a <code>FileReader</code> object
    to read its contents into memory. 
    <PRE>
    var reader = new FileReader();
</PRE>

<P>
to read the file we call one of the 
<A NAME="tex2html104"
  HREF="https://developer.mozilla.org/en-US/docs/Web/API/FileReader#Methods">readAs..</A>. For example
<A NAME="tex2html105"
  HREF="https://developer.mozilla.org/en-US/docs/Web/API/FileReader.readAsDataURL">readAsDataURL</A>
is used to starts reading the contents of the specified Blob or File:
    <PRE>
    reader.readAsDataURL(f);
</PRE>
</LI>
<LI>Methods to remember: 
    
<UL>
<LI><code>FileReader.abort()</code>
    Aborts the read operation. Upon return, the <code>readyState</code> will be DONE.
</LI>
<LI><code>FileReader.readAsArrayBuffer()</code>
    Starts reading the contents of the specified <code>Blob</code>, once finished, the <code>result</code> attribute contains an <code>ArrayBuffer</code> representing the file's data.
</LI>
<LI><code>FileReader.readAsBinaryString()</code>
    Starts reading the contents of the specified <code>Blob</code>, once finished, the result attribute contains the raw binary data from the file as a string.
</LI>
<LI><code>FileReader.readAsDataURL()</code>
    Starts reading the contents of the specified <code>Blob</code>.

<P>
When the read operation is finished, the <code>readyState</code> becomes <code>DONE</code>, and the <code>loadend</code> is triggered. At that time, the result attribute contains a URL representing the file's data as <A NAME="tex2html106"
  HREF="http://en.wikipedia.org/wiki/Base64">base64</A>
encoded string.
</LI>
<LI><code>FileReader.readAsText()</code>
Starts reading the contents of the specified <code>Blob</code>, once finished, the result attribute contains the contents of the file as a text string.
</LI>
</UL>
Once one of these read methods is called on your <code>FileReader</code> object, the <code>onloadstart</code>, <code>onprogress</code>, <code>onload</code>, <code>onabort</code>, <code>onerror</code>, and <code>onloadend</code> can be used to track its progress.
</LI>
<LI>When the load finishes, 
    the reader's
    <code>onload</code> event is fired and its result attribute can be used to access
    the file data.
      <PRE>
        reader.onload = function(e) { 
          var contents = e.target.result;
          
          ....
        }
</PRE>
    See 
    
<UL>
<LI><A NAME="tex2html107"
  HREF="http://jsfiddle.net/casiano/7ekt8/">jsfiddle</A>
</LI>
<LI><A NAME="tex2html108"
  HREF="https://github.com/crguezl/files-in-javascript-tut/blob/master/readimages.html">GitHub</A>
</LI>
<LI><A NAME="tex2html109"
  HREF="http://crguezl.github.io/files-in-javascript-tut/readimages.html">gh-pages</A>
</LI>
<LI>or
    <PRE>
    [~/src/javascript/fileapi/html5rocks]$ pwd -P
    /Users/casiano/local/src/javascript/fileapi/html5rocks
    [~/src/javascript/fileapi/html5rocks]$ ls -l readimages.html 
    -rw-r--r--  1 casiano  staff  1530 15 feb 21:00 readimages.html
</PRE>
</LI>
<LI><A NAME="tex2html110"
  HREF="http://jsfiddle.net/casiano/Xadvz/#base">base64 testing image jsfiddle</A>
</LI>
<LI>The <code>insertBefore()</code> method inserts a node as a child, right before an existing child, which you specify. See
    <PRE>
    [~/src/javascript/fileapi/html5rocks]$ ls -l readimages.html 
    -rw-r--r--  1 casiano  staff  1530 15 feb 21:00 readimages.html
</PRE>
</LI>
</UL>
</LI>
</UL>

<P>

<H4><A NAME="SECTION04190040000000000000">
global.css</A>
</H4>
  

<P>
<PRE>
[~/javascript/PLgrado/ini(master)]$ cat global.css 
html *
{
   font-size: large; 
   /* The !important ensures that nothing can override what you've set in this style (unless it is also important). */
   font-family: Arial;
}

.thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }

h1            { text-align: center; font-size: x-large; }
th, td        { vertical-align: top; text-align: left; }   
/* #finaltable  * { color: white; background-color: black; }   */

/* #finaltable table { border-collapse:collapse; } */
/* #finaltable table, td { border:1px solid white; } */
#finaltable:hover td { background-color: blue; } 
tr:nth-child(odd)    { background-color:#eee; }
tr:nth-child(even)    { background-color:#00FF66; }
input        { text-align: right;  border: none;       }     /* Align input to the right  */
textarea     { border: outset; border-color: white;       }                        
table        { border: inset; border-color: white; }
.hidden      { display: none; }
.unhidden    { display: block; }
table.center { margin-left:auto; margin-right:auto; }
#result      { border-color: red; }
tr.error       { background-color: red; }
pre.output   { background-color: white; }
/*
span.repeated { background-color: red }
span.header { background-color: blue }
span.comments { background-color: orange }
span.blanks { background-color: green }
span.nameEqualValue { background-color: cyan }
span.error { background-color: red }
*/
body
{
 background-color:#b0c4de;  /* blue */
}
</PRE>

<P>

<H4><A NAME="SECTION04190050000000000000">
Ficheros de Prueba</A>
</H4>
  

<P>
<PRE>
~/Dropbox/src/javascript/PLgrado/ini(master)]$ cat input.ini 
; last modified 1 April 2001 by John Doe
[owner]
name=John Doe
organization=Acme Widgets Inc.

[database]
; use IP address in case network name resolution is not working
server=192.0.2.62     
port=143
file = "payroll.dat"
</PRE>

<P>
<PRE>
$ cat input2.ini 
[special_fields] 
required = "EmailAddr,FirstName,LastName,Mesg" 
csvfile = "contacts.csv" 
csvcolumns = "EmailAddr,FirstName,LastName,Mesg,Date,Time" 

[email_addresses] 
sales = "jack@yahoo.com,mary@my-sales-force.com,president@my-company.com"
</PRE>

<P>
<PRE>
$ cat inputerror.ini
[owner]
name=John Doe
organization$Acme Widgets Inc.
 
[database
; use IP address in case network name resolution is not working
server=192.0.2.62     
port=143
file = "payroll.dat"
</PRE>

<P>

<H4><A NAME="SECTION04190060000000000000">
ini.js</A>
</H4>
  

<P>
<PRE>
[~/javascript/PLgrado/ini(master)]$ cat ini.js
"use strict"; // Use ECMAScript 5 strict mode in browsers that support it

$(document).ready(function() {
   $("#fileinput").change(calculate);
});

function calculate(evt) {
  var f = evt.target.files[0]; 

  if (f) {
    var r = new FileReader();
    r.onload = function(e) { 
      var contents = e.target.result;
      
      var tokens = lexer(contents);
      var pretty = tokensToString(tokens);
      
      out.className = 'unhidden';
      initialinput.innerHTML = contents;
      finaloutput.innerHTML = pretty;
    }
    r.readAsText(f);
  } else { 
    alert("Failed to load file");
  }
}

var temp = '&lt;li&gt; &lt;span class = "&lt;%= token.type %&gt;"&gt; &lt;%= match %&gt; &lt;/span&gt;\n';

function tokensToString(tokens) {
   var r = '';
   for(var i=0; i &lt; tokens.length; i++) {
     var t = tokens[i]
     var s = JSON.stringify(t, undefined, 2);
     s = _.template(temp, {token: t, match: s});
     r += s;
   }
   return '&lt;ol&gt;\n'+r+'&lt;/ol&gt;';
}

function lexer(input) {
  var blanks         = /^\s+/;
  var iniheader      = /^\[([^\]\r\n]+)\]/;
  var comments       = /^[;#](.*)/;
  var nameEqualValue = /^([^=;\r\n]+)=([^;\r\n]*)/;
  var any            = /^(.|\n)+/;

  var out = [];
  var m = null;

  while (input != '') {
    if (m = blanks.exec(input)) {
      input = input.substr(m.index+m[0].length);
      out.push({ type : 'blanks', match: m });
    }
    else if (m = iniheader.exec(input)) {
      input = input.substr(m.index+m[0].length);
      out.push({ type: 'header', match: m });
    }
    else if (m = comments.exec(input)) {
      input = input.substr(m.index+m[0].length);
      out.push({ type: 'comments', match: m });
    }
    else if (m = nameEqualValue.exec(input)) {
      input = input.substr(m.index+m[0].length);
      out.push({ type: 'nameEqualValue', match: m });
    }
    else if (m = any.exec(input)) {
      out.push({ type: 'error', match: m });
      input = '';
    }
    else {
      alert("Fatal Error!"+substr(input,0,20));
      input = '';
    }
  }
  return out;
}
</PRE>
Véase la sección <I>JSON.stringify()</I>
<A HREF="node10.html#parrafo:jsonstringify">1.3</A>
para saber mas sobre <code>JSON.stringify</code>.

<P>

<H4><A NAME="SECTION04190070000000000000">
Dudas sobre la Sintáxis del Formato <TT>INI</TT></A>
</H4>
  

<A NAME="parrafo:inifile"></A>La sintáxis de <code>INI</code> no está bien definida.
Se aceptan decisiones razonables para cada una de las expresiones regulares.
Si quiere ver un parser en acción puede
instalar la gema <code>inifile</code> (Ruby). 

<P>
Una opción que no hemos contemplado en nuestro código es la posibilidad de hacer que una línea de asignación se expanda en varias líneas.
En <code>inifile</code> el carácter <code>\</code> indica 
que la línea continúa en la siguiente:
<PRE>
[~/javascript/PLgrado/inifile(master)]$ cat test/data/good.ini 
[section_one]
one = 1
two = 2

[section_two]
three =         3
multi = multiline \
support

; comments should be ignored
[section three]
four   =4
five=5
six =6

[section_four]
   [section_five]
 seven and eight= 7 &amp; 8
</PRE>

<P>
<PRE>
[~/javascript/PLgrado/inifile(master)]$ pry
[2] pry(main)&gt; require 'inifile'
=&gt; true
</PRE>
<PRE>
[3] pry(main)&gt; p = IniFile.new(:filename =&gt; 'test/data/good.ini')
=&gt; #&lt;IniFile:0x007fba2f41a500
 @_line=" seven and eight= 7 &amp; 8",
 @_section={"seven and eight"=&gt;"7 &amp; 8"},
 @comment=";#",
 @content=
  "[section_one]\none = 1\ntwo = 2\n\n[section_two]\nthree =         3\nmulti = multiline \\\nsupport\n\n; comments should be ignored\n[section three]\nfour   =4\nfive=5\nsix =6\n\n[section_four]\n   [section_five]\n seven and eight= 7 &amp; 8\n\n",
 @default="global",
 @encoding=nil,
 @escape=true,
 @filename="test/data/good.ini",
 @ini=
  {"section_one"=&gt;{"one"=&gt;"1", "two"=&gt;"2"},
   "section_two"=&gt;{"three"=&gt;"3", "multi"=&gt;"multiline support"},
   "section three"=&gt;{"four"=&gt;"4", "five"=&gt;"5", "six"=&gt;"6"},
   "section_four"=&gt;{},
   "section_five"=&gt;{"seven and eight"=&gt;"7 &amp; 8"}},
 @param="="&gt;
</PRE>

<P>
<PRE>
[4] pry(main)&gt; p["section_two"]
=&gt; {"three"=&gt;"3", "multi"=&gt;"multiline support"}
[5] pry(main)&gt; p[:section_two]
</PRE>

<P>

<H4><A NAME="SECTION04190080000000000000">
Tareas</A>
</H4>
  

<P>
Es conveniente que consiga estos objetivos:

<UL>
<LI>Pueden comenzar haciendo un fork del repositorio
<A NAME="tex2html111"
  HREF="https://github.com/crguezl/pl-grado-ini-files">https://github.com/crguezl/pl-grado-ini-files</A>.
</LI>
<LI>La entrada debería poder leerse desde un fichero. Añada drag and drop.
</LI>
<LI>Use Web Storage igual que en la anterior
</LI>
<LI>Escriba las pruebas
</LI>
<LI>Use templates externos <code>underscore</code> para estructurar la salida
</LI>
<LI>Añada soporte para multilíneas en las asignaciones
(Véase la sección <A HREF="#parrafo:inifile">1.9</A>)
<PRE>
&gt; s = 'a=b\\\nc'
'a=b\\\nc'
&gt; n2 = /^([^=;#\r\n]+)=((?:[^;#\r\n]*\\\n)*[^;#\r\n]*)/
/^([^=;#\r\n]+)=((?:[^;#\r\n]*\\\n)*[^;#\r\n]*)/
&gt; m = n2.exec(s)
[ 'a=b\\\nc', 'a', 'b\\\nc',
  index: 0, input: 'a=b\\\nc' ]
&gt; d = m[2]
'b\\\nc'
&gt; d.replace(/\\\n/g,' ')
'b c'
</PRE>
</LI>
</UL>

<P>

<H4><A NAME="SECTION04190090000000000000">
Véase</A>
</H4>
  

<P>

<OL>
<LI><A NAME="tex2html112"
  HREF="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify</A>
</LI>
<LI><A NAME="tex2html113"
  HREF="http://www.json.org/">www.json.org</A>
</LI>
<LI><A NAME="tex2html114"
  HREF="http://www.json.org/js.html">JSON in JavaScript</A>
</LI>
<LI><A NAME="tex2html115"
  HREF="http://underscorejs.org/#template">Underscore: template</A>
</LI>
<LI><A NAME="tex2html116"
  HREF="http://stackoverflow.com/questions/4778881/how-to-use-underscore-js-as-a-template-engine">Stackoverflow::how to use Underscore template</A>
</LI>
</OL>

<P>

<DIV CLASS="navigation"><HR>
<A NAME="tex2html1038"
  HREF="node17.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html1032"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html1026"
  HREF="node15.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html1034"
  HREF="node98.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1036"
  HREF="node101.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~plgrado/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1213m2/course/view.php?id=271"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="http://crguezl.github.io/pl-html/"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html7"
  HREF="https://developer.mozilla.org/es/docs/JavaScript"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html8"
  HREF="http://github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html9"
  HREF="https://plus.google.com/u/0/communities/107031495100582318205"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1314"></A><A NAME="tex2html10"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html11"
  HREF="http://www.ull.es/view/centros/etsii/Grado/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html12"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html13"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html1039"
  HREF="node17.html">Práctica: Analizador Léxico para</A>
<B>Sup:</B> <A NAME="tex2html1033"
  HREF="node7.html">Expresiones Regulares y Análisis</A>
<B> Ant:</B> <A NAME="tex2html1027"
  HREF="node15.html">Ejercicios</A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
<I>Casiano Rodríguez León <BR>
2014-03-18</I>
</ADDRESS>
</BODY>
</HTML>
