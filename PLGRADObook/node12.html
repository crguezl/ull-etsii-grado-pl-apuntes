<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Práctica: Comma Separated Values. CSV usando Ajax</TITLE>
<META NAME="description" CONTENT="Práctica: Comma Separated Values. CSV usando Ajax">
<META NAME="keywords" CONTENT="javascriptexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node13.html">
<LINK REL="previous" HREF="node11.html">
<LINK REL="up" HREF="node7.html">
<LINK REL="next" HREF="node13.html">
</HEAD>

<BODY >

<DIV CLASS="navigation">
<A NAME="tex2html1094"
  HREF="node13.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html1088"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html1082"
  HREF="node11.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html1090"
  HREF="node91.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1092"
  HREF="node94.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/perlexamples/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="Apuntes de LPP"></A><A NAME="tex2html3"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5669"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2014/2015"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2013/2014"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="https://plus.google.com/u/0/communities/103299470687051533933"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1415"></A><A NAME="tex2html7"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html8"
  HREF="http://www.ull.es/view/centros/etsii/Grado_en_Ingenieria_Informatica/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html9"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html10"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html1095"
  HREF="node13.html">Comentarios y Consejos</A>
<B>Sup:</B> <A NAME="tex2html1089"
  HREF="node7.html">Expresiones Regulares y Análisis</A>
<B> Ant:</B> <A NAME="tex2html1083"
  HREF="node11.html">Práctica: Comma Separated Values.</A>
<B> Con:</B> 
<A NAME="tex2html1090"
  HREF="node91.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>
<B> Ind:</B> 
<A NAME="tex2html1092"
  HREF="node94.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A>
<BR> <P>
</DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><UL>
<LI><UL>
<LI><A NAME="tex2html1096"
  HREF="node12.html#SECTION04150010000000000000">Ejemplo usando Ajax con jQuery y Express.js</A>
<LI><A NAME="tex2html1097"
  HREF="node12.html#SECTION04150020000000000000">Ejemplo de como Desplegar una Aplicación  Express sobre Node.JS en Heroku</A>
<LI><A NAME="tex2html1098"
  HREF="node12.html#SECTION04150030000000000000">GitHub Issues</A>
<LI><A NAME="tex2html1099"
  HREF="node12.html#SECTION04150040000000000000">Requisitos de la Práctica</A>
</UL></UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION04150000000000000000"></A>
   <A NAME="3668"></A>
  
<A NAME="sectionpractica:csvajax"></A>
<BR>
Práctica: Comma Separated Values. CSV usando Ajax
</H1>

<P>

<P>

<H4><A NAME="SECTION04150010000000000000">
Ejemplo usando Ajax con jQuery y Express.js</A>
</H4>
  

<P>
<A NAME="tex2html122"
  HREF="https://github.com/crguezl/how-jquery-works-tutorial/tree/getallparams">Código del server</A>:

<P>
<PRE>
[~/javascript/jquery/how-jquery-works-tutorial(getallparams)]$ cat app.js
var express = require('express');
var app = express();
var path = require('path');

app.use(express.static('public'));

// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'ejs');

app.get('/', function (req, res) {
  res.render('index', { title: 'Express' });
})

app.get('/chuchu', function (req, res) {
  var isAjaxRequest = req.xhr;
  console.log(isAjaxRequest);
  if (isAjaxRequest) {
    console.log(req.query);
    res.send('{"answer": "Server responds: hello world!"}')
  }
  else {
    res.send('not an ajax request');
  }
});

var server = app.listen(3000, function () {

  var host = server.address().address
  var port = server.address().port

  console.log('Example app listening at http://%s:%s', host, port)

});
</PRE>

<P>

<UL>
<LI><code>jQuery.get( url [, data ] [, success(data, textStatus, jqXHR) ] [, dataType ] )</code>
load data from the server using a HTTP GET request.

<P>
</LI>
<LI><code>url</code>

<P>
Type: String

<P>
A string containing the URL to which the request is sent.
</LI>
<LI><code>data</code>

<P>
Type: PlainObject or String

<P>
A plain object or string that is sent to the server with the request.
</LI>
<LI><code>success(data, textStatus, jqXHR)</code>

<P>
Type: Function()

<P>
A callback function that is executed if the request succeeds.
</LI>
<LI><code>dataType</code>

<P>
Type: String

<P>
The type of data expected from the server. Default: Intelligent Guess 
(<code>xml</code>, <code>json</code>, <code>script</code>, <code>or</code> <code>html</code>).
</LI>
</UL>

<P>
To use callbacks, it is important to know how to pass them into their parent function.

<P>
En el directorio <code>views</code> hemos puesto el template:
<PRE>
[~/javascript/jquery/how-jquery-works-tutorial(getallparams)]$ cat views/index.ejs 
&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%- title %&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;&lt;%- title  %&gt;&lt;/h1&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href="http://jquery.com/" id="jq"&gt;jQuery&lt;/a&gt;
      &lt;li&gt;&lt;a href="/chuchu"&gt;Visit chuchu!&lt;/a&gt;
    &lt;/ul&gt;
    &lt;div class="result"&gt;&lt;/div&gt;
    &lt;script src="https://code.jquery.com/jquery-2.1.3.js"&gt;&lt;/script&gt;
    &lt;script&gt;
      $( document ).ready(function() {
          $( "#jq" ).click(function( event ) {
              event.preventDefault();
              $.get( "/chuchu", {nombres: ["juan", "pedro"]}, function( data ) {
                $( ".result" ).html( data["answer"]);
                console.log(data);
              }, 'json');
          });
      });
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</PRE>
Estas son las dependencias:
<PRE>
[~/javascript/jquery/how-jquery-works-tutorial(getallparams)]$ cat package.json 
{
  "name": "ajaxjquery",
  "version": "0.0.0",
  "description": "",
  "main": "hello.js",
  "dependencies": {
    "express": "*",
    "ejs": "*",
    "gulp-shell": "*",
    "body-parser": "~1.12.0"
  },
  "devDependencies": {},
  "scripts": {
    "test": "node hello.js"
  },
  "author": "",
  "license": "ISC"
}
</PRE>
Además hemos instalado a nivel global <code>gulp</code> y <code>node-supervisor</code>.

<P>
Podemos arrancar el servidor usando este <code>gulpfile</code>:

<P>
<PRE>
[~/javascript/jquery/how-jquery-works-tutorial(getallparams)]$ cat gulpfile.js 
var gulp    = require('gulp');
var shell = require('gulp-shell');

gulp.task('default', ['server']);

// npm install supervisor -g
gulp.task('server', function () {
  return gulp.src('').pipe(shell([ 'node-supervisor app.js' ]));
});

gulp.task('open', function() {
  return gulp.src('').
           pipe(shell("open https://github.com/crguezl/how-jquery-works-tutorial/tree/getallparams"));
});
</PRE>

<P>

<H4><A NAME="SECTION04150020000000000000">
Ejemplo de como Desplegar una Aplicación  Express sobre Node.JS en Heroku</A>
</H4>
  

<P>
Véase:

<UL>
<LI>La rama heroku del repo <A NAME="tex2html123"
  HREF="https://github.com/crguezl/how-jquery-works-tutorial/tree/heroku">how-jquery-works-tutorial</A>
</LI>
<LI>El tutorial de Heroku 
<A NAME="tex2html124"
  HREF="https://devcenter.heroku.com/articles/getting-started-with-nodejs">Getting Started with Node.js on Heroku</A>
</LI>
<LI>El capítulo sobre Heroku en los apuntes de LPP
</LI>
</UL>

<P>

<H4><A NAME="SECTION04150030000000000000">
GitHub Issues</A>
</H4>
  

<A NAME="tex2html125"
  HREF="https://guides.github.com/features/issues/index.html">Mastering Issues</A>
<P>

<H4><A NAME="SECTION04150040000000000000">
Requisitos de la Práctica</A>
</H4>
  

<P>
A los requisitos de la práctica <I>Comma Separated Values. CSV</I> <A HREF="node11.html#sectionpractica:csv">1.4</A>
anterior:

<UL>
<LI>Los templates deben hacerse usando 
<FONT COLOR="#ff0000"> underscore</FONT> y el truco del elemento <code>script</code> en el HTML
</LI>
<LI>Se debe usar locaStorage para almacenar las últimas entradas
</LI>
<LI>Añada pruebas usando Mocha y Chai
</LI>
<LI>Use Karma para la ejecución de las tareas
</LI>
<LI>Use Gulp para la gestión de las tareas 
</LI>
<LI>Haga un análisis de cubrimiento usando Blanket
</LI>
<LI>Despliegue las pruebas en Travis
</LI>
<LI>
<FONT COLOR="#0000ff"> Despliegue la aplicación en Heroku usando Express.JS</FONT>
</LI>
<LI>Asegúrese de que el <code>README.md</code> figuran enlaces a Heroku, badge de Travis, enlaces a las páginas GitHub de los autores, enlaces a las pruebas con Mocha, Chai y Blanket.
</LI>
</UL>
Le añadimos 

<UL>
<LI>El requisito de usar AJAX con jQuery:

<P>

<FONT COLOR="#ff0000"> El navegador/cliente lee la cadena con los datos de entrada y se los envía usando AJAX al servidor, el cual calcula y devuelve en JSON la tabla (el array de arrays) que finalmente es insertada en la página por el cliente/navegador</FONT>.

<P>
</LI>
<LI>Use los 
<FONT COLOR="#ff0000"> Issues de GitHub</FONT> como herramienta colaborativa , indicando
que bugs han detectado, que funcionalidades hay que añadir, etc.
Usen <A NAME="4162"></A><SPAN  CLASS="textbf">etiquetas</SPAN> y <A NAME="4164"></A><SPAN  CLASS="textbf">milestones</SPAN> y asigne tareas a los
programadores del
grupo. Aprenda a referenciar commits dentro de un issue, a referenciar colaboradores, etc.

<P>
Para ello vale la pena que lean este tutorial:
<A NAME="tex2html126"
  HREF="https://guides.github.com/features/issues/index.html">Mastering Issues</A>
</LI>
</UL>

<P>

<DIV CLASS="navigation"><HR>
<A NAME="tex2html1094"
  HREF="node13.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html1088"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html1082"
  HREF="node11.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html1090"
  HREF="node91.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1092"
  HREF="node94.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/perlexamples/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="Apuntes de LPP"></A><A NAME="tex2html3"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5669"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2014/2015"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2013/2014"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="https://plus.google.com/u/0/communities/103299470687051533933"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1415"></A><A NAME="tex2html7"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html8"
  HREF="http://www.ull.es/view/centros/etsii/Grado_en_Ingenieria_Informatica/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html9"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html10"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html1095"
  HREF="node13.html">Comentarios y Consejos</A>
<B>Sup:</B> <A NAME="tex2html1089"
  HREF="node7.html">Expresiones Regulares y Análisis</A>
<B> Ant:</B> <A NAME="tex2html1083"
  HREF="node11.html">Práctica: Comma Separated Values.</A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
<I>Casiano Rodríguez León <BR>
2015-03-18</I>
</ADDRESS>
</BODY>
</HTML>
