<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Práctica: Conversor de Temperaturas</TITLE>
<META NAME="description" CONTENT="Práctica: Conversor de Temperaturas">
<META NAME="keywords" CONTENT="javascriptexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node10.html">
<LINK REL="previous" HREF="node8.html">
<LINK REL="up" HREF="node7.html">
<LINK REL="next" HREF="node10.html">
</HEAD>

<BODY >

<DIV CLASS="navigation">
<A NAME="tex2html832"
  HREF="node10.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html826"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html820"
  HREF="node8.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html828"
  HREF="node76.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html830"
  HREF="node79.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~plgrado/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5669"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2014/2015"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2013/2014"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="https://plus.google.com/u/0/communities/103299470687051533933"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1415"></A><A NAME="tex2html7"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html8"
  HREF="http://www.ull.es/view/centros/etsii/Grado_en_Ingenieria_Informatica/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html9"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html10"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html833"
  HREF="node10.html">Práctica: Comma Separated Values.</A>
<B>Sup:</B> <A NAME="tex2html827"
  HREF="node7.html">Expresiones Regulares y Análisis</A>
<B> Ant:</B> <A NAME="tex2html821"
  HREF="node8.html">Mozilla Developer Network: Documentación</A>
<B> Con:</B> 
<A NAME="tex2html828"
  HREF="node76.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>
<B> Ind:</B> 
<A NAME="tex2html830"
  HREF="node79.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A>
<BR> <P>
</DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><UL>
<LI><UL>
<LI><A NAME="tex2html834"
  HREF="node9.html#SECTION04120010000000000000">index.html</A>
<LI><A NAME="tex2html835"
  HREF="node9.html#SECTION04120020000000000000">global.css</A>
<LI><A NAME="tex2html836"
  HREF="node9.html#SECTION04120030000000000000">temperature.js</A>
<LI><A NAME="tex2html837"
  HREF="node9.html#SECTION04120040000000000000">Despliegue</A>
<LI><A NAME="tex2html838"
  HREF="node9.html#SECTION04120050000000000000">Mocha y Chai</A>
<LI><A NAME="tex2html839"
  HREF="node9.html#SECTION04120060000000000000">Pruebas: Estructura</A>
<LI><A NAME="tex2html840"
  HREF="node9.html#SECTION04120070000000000000">Pruebas: <TT>index.html</TT></A>
<LI><A NAME="tex2html841"
  HREF="node9.html#SECTION04120080000000000000">Pruebas: Añadir los tests</A>
<LI><A NAME="tex2html842"
  HREF="node9.html#SECTION04120090000000000000">Pruebas: Véase</A>
</UL></UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION04120000000000000000"></A>
   <A NAME="2459"></A>
  
<A NAME="sectionpractica:conversordetemperaturas"></A>
<BR>
Práctica: Conversor de Temperaturas
</H1>

<P>
Véase 
<A NAME="tex2html16"
  HREF="https://bitbucket.org/casiano/pl-grado-temperature-converter/src">https://bitbucket.org/casiano/pl-grado-temperature-converter/src</A>.

<P>
<PRE>
[~/srcPLgrado/temperature(master)]$ pwd -P
/Users/casiano/local/src/javascript/PLgrado/temperature # 27/01/2014
</PRE>

<P>

<H4><A NAME="SECTION04120010000000000000">
index.html</A>
</H4>
  

<P>

    <pre>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
      <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;title&gt;</span>JavaScript Temperature Converter<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"global.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>

     <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"temperature.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Temperature Converter<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;table&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;th&gt;</span>Enter  Temperature (examples: 32F, 45C, -2.5f):<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">id=</span><span class="s">"original"</span> <span class="na">onchange=</span><span class="s">"calculate();"</span><span class="nt">&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;th&gt;</span>Converted Temperature:<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;td&gt;&lt;span</span> <span class="na">class=</span><span class="s">"output"</span> <span class="na">id=</span><span class="s">"converted"</span><span class="nt">&gt;&lt;/span&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
    </pre>

<P>

<H4><A NAME="SECTION04120020000000000000">
global.css</A>
</H4>
  

<P>

    <pre>
<span class="nt">th</span><span class="o">,</span> <span class="nt">td</span>      <span class="p">{</span> <span class="k">vertical-align</span><span class="o">:</span> <span class="k">top</span><span class="p">;</span> <span class="k">text-align</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span> <span class="k">font-size</span><span class="o">:</span><span class="k">large</span><span class="p">;</span> <span class="p">}</span>     
<span class="nf">#converted</span>  <span class="p">{</span> <span class="k">color</span><span class="o">:</span> <span class="nb">red</span><span class="p">;</span> <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span> <span class="k">font-size</span><span class="o">:</span><span class="k">large</span><span class="p">;</span>          <span class="p">}</span>    
<span class="nt">input</span>       <span class="p">{</span> <span class="k">text-align</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span>  <span class="k">border</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="k">font-size</span><span class="o">:</span><span class="k">large</span><span class="p">;</span>       <span class="p">}</span>   
<span class="nt">body</span>
<span class="p">{</span>
 <span class="k">background-color</span><span class="o">:</span><span class="m">#b0c4de</span><span class="p">;</span>  <span class="c">/* blue */</span>
 <span class="k">font-size</span><span class="o">:</span><span class="k">large</span><span class="p">;</span>
<span class="p">}</span>
    </pre>

<P>

<H4><A NAME="SECTION04120030000000000000">
temperature.js</A>
</H4>
  

<P>

    <pre>
<span class="s2">"use strict"</span><span class="p">;</span> <span class="c1">// Use ECMAScript 5 strict mode in browsers that support it</span>
<span class="kd">function</span> <span class="nx">calculate</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">original</span>       <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"........"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">original</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">regexp</span> <span class="o">=</span> <span class="sr">/.............................../</span><span class="p">;</span>
  
  <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">.</span><span class="nx">match</span><span class="p">(......);</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="p">....;</span>
    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="p">....;</span>
    <span class="nx">num</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;c&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="p">(</span><span class="nx">num</span> <span class="o">*</span> <span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="mi">32</span><span class="p">;</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="p">..............................</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="p">(</span><span class="nx">num</span> <span class="o">-</span> <span class="mi">32</span><span class="p">)</span><span class="o">*</span><span class="mi">5</span><span class="o">/</span><span class="mi">9</span><span class="p">;</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="p">............................</span>
    <span class="p">}</span>
    <span class="nx">converted</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="nx">converted</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">"ERROR! Try something like &#39;-4.2C&#39; instead"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
    </pre>

<P>

<H4><A NAME="SECTION04120040000000000000">
Despliegue</A>
</H4>
  

<UL>
<LI>Deberá desplegar la aplicación en GitHub Pages como página de proyecto.
Vea la sección <I>GitHub Project Pages</I> <A HREF="node159.html#subsection:githubprojectpages"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png"></A>.
</LI>
</UL>

<P>

<H4><A NAME="SECTION04120050000000000000">
Mocha y Chai</A>
</H4>
  

Mocha is a test framework while Chai is an expectation one. 

<P>
Let's say
Mocha setups and describes test suites and Chai provides convenient
helpers to perform all kinds of assertions against your JavaScript code.

<P>

<H4><A NAME="SECTION04120060000000000000">
Pruebas: Estructura</A>
</H4>
  

<P>
Instale <code>mocha</code>.
<PRE>
$ npm install -g mocha
</PRE>

<P>
Creamos la estructura para las pruebas:

<P>
<PRE>
$ mocha init tests
</PRE>

<P>
<PRE>
$ tree tests
tests
|-- index.html
|-- mocha.css
|-- mocha.js
`-- tests.js
</PRE>

<P>
Añadimos <code>chai.js</code>
(Véase 
<A NAME="tex2html17"
  HREF="http://chaijs.com/guide/installation/">http://chaijs.com/guide/installation/</A>) al directorio <code>tests</code>.

<P>
The latest tagged version will be available for hot-linking at 
<A NAME="tex2html18"
  HREF="http://chaijs.com/chai.js">http://chaijs.com/chai.js</A>.

<P>
If you prefer to host yourself, use the <code>chai.js</code> file from the root of the 
<A NAME="tex2html19"
  HREF="https://github.com/chaijs/chai">github project</A>. 

<P>
<PRE>
[~/srcPLgrado/temperature(master)]$ tree tests/
tests/
|-- chai.js
|-- index.html
|-- mocha.css
|-- mocha.js
`-- tests.js

0 directories, 5 files
</PRE>
Podemos encontrar un ejemplo de  unit testing en JavaScript en el browser con 
el testing framework Mocha y  Chai en el repositorio 
<A NAME="tex2html20"
  HREF="https://github.com/ludovicofischer/mocha-chai-browser-demo">https://github.com/ludovicofischer/mocha-chai-browser-demo</A>.

<P>

<H4><A NAME="SECTION04120070000000000000">
Pruebas: <TT>index.html</TT></A>
</H4>
  

<P>
Modificamos <code>index.html</code> para 

<UL>
<LI>Cargar <code>chai.js</code>
</LI>
<LI>Cargar <code>temperature.js</code>
</LI>
<LI>Usar el estilo <code>mocha.setup('tdd')</code>:
</LI>
<LI>Imitar la página <code>index.html</code> con los correspondientes <code>input</code> y 
<code>span</code>:
<PRE>
    &lt;input id="original" placeholder="32F" size="50"&gt;
    &lt;span class="output" id="converted"&gt;&lt;/span&gt;
</PRE>
</LI>
</UL>

<P>
<PRE>
[~/srcPLgrado/temperature(master)]$ cat tests/index.html 
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Mocha&lt;/title&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;link rel="stylesheet" href="mocha.css" /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="mocha"&gt;&lt;/div&gt;
    &lt;input id="original" placeholder="32F" size="50"&gt;
    &lt;span class="output" id="converted"&gt;&lt;/span&gt;

    &lt;script src="chai.js"&gt;&lt;/script&gt;
    &lt;script src="mocha.js"&gt;&lt;/script&gt;
    &lt;script src="../temperature.js"&gt;&lt;/script&gt;
    &lt;script&gt;mocha.setup('tdd')&lt;/script&gt;
    &lt;script src="tests.js"&gt;&lt;/script&gt;

    &lt;script&gt;
      mocha.run();
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</PRE>

<P>

<H4><A NAME="SECTION04120080000000000000">
Pruebas: Añadir los tests</A>
</H4>
  

<P>
The "TDD" interface provides 

<UL>
<LI><code>suite()</code>
</LI>
<LI><code>test()</code>
</LI>
<LI><code>setup()</code>
</LI>
<LI><code>teardown()</code>.
</LI>
</UL>

<P>
<PRE>
[~/srcPLgrado/temperature(master)]$ cat tests/tests.js 
var assert = chai.assert;

suite('temperature', function() {
    test('32F = 0C', function() {
        original.value = "32F";
        calculate();
        assert.deepEqual(converted.innerHTML, "0.0 Celsius");
    });
    test('45C = 113.0 Farenheit', function() {
        original.value = "45C";
        calculate();
        assert.deepEqual(converted.innerHTML, "113.0 Farenheit");
    });
    test('5X = error', function() {
        original.value = "5X";
        calculate();
        assert.match(converted.innerHTML, /ERROR/);
    });
});
</PRE>

<P>

<H4><A NAME="SECTION04120090000000000000">
Pruebas: Véase</A>
</H4>
  

<UL>
<LI><A NAME="tex2html21"
  HREF="https://nicolas.perriault.net/code/2013/testing-frontend-javascript-code-using-mocha-chai-and-sinon/">Testing your frontend JavaScript code using mocha, chai, and sinon</A>
by Nicolas Perriault
</LI>
</UL>

<P>

<DIV CLASS="navigation"><HR>
<A NAME="tex2html832"
  HREF="node10.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html826"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html820"
  HREF="node8.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html828"
  HREF="node76.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html830"
  HREF="node79.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~plgrado/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5669"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2014/2015"></A><A NAME="tex2html4"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1104"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="PL moodle 2013/2014"></A><A NAME="tex2html5"
  HREF="javascriptexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html6"
  HREF="https://plus.google.com/u/0/communities/103299470687051533933"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="comunidad g+ PL1415"></A><A NAME="tex2html7"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html8"
  HREF="http://www.ull.es/view/centros/etsii/Grado_en_Ingenieria_Informatica/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html9"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html10"
  HREF="https://github.com/crguezl"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="crguezl at github"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html833"
  HREF="node10.html">Práctica: Comma Separated Values.</A>
<B>Sup:</B> <A NAME="tex2html827"
  HREF="node7.html">Expresiones Regulares y Análisis</A>
<B> Ant:</B> <A NAME="tex2html821"
  HREF="node8.html">Mozilla Developer Network: Documentación</A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
<I>Casiano Rodríguez León <BR>
2015-01-25</I>
</ADDRESS>
</BODY>
</HTML>
